<div id="banner_app" >
	<div class="pubHeadBanner">
		<div class="banner clearfix" v-for="(item,index) in bannerData" v-show="index==banner_index" style="height:100%">
			<img class="pic" :src="item" />
		</div>
		
		<!-- 导航点 -->
		<div class="banBtnNav">
			<span v-for="(item,index) in bannerData" :class="index==banner_index?'active':''" :data-index="index" @click="toBannerOne"></span>
		</div>
	</div>
</div>


<script type="text/javascript">
	var banner_app = new Vue({
	    el: '#banner_app',
	    data:function(){
	        return {
				is_toggle:false,
				shownav:true,
				currentUrl:'',
	        	banner_index:0,
	        	is_toggle:false,
				is_show:false,
				bannerData:['images/banner.jpg','images/banner1.jpg'],
				searchItem:{
					thirdapp_id:window.base.thirdapp_id,
					title:''
				},
				bannerTimer:null
	        }
	    },
	    created:function () {
	        var self = this;
	        var currentUrl = window.base.GetUrlRelativePath();
		
			var reg = /\/([^\/]+)\.html/i;
			if(reg.exec(currentUrl)&&reg.exec(currentUrl)[0]){
				self.currentUrl = reg.exec(currentUrl)[0];
			}else{
				self.currentUrl = '/index.html';
			};
			
			self.getMainData();
			// window.base.bus.$on('to_headBanner',(res)=>{	
			// 	if(res.mainImg){
			// 		 self.bannerData = res.mainImg
			// 		 return
			// 	};
			// 	console.log('res222',res)
			// 	this.searchItem.title = res.title;
				
			// 	this.to_headBanner()
			// });
			
			self.bannerTimer = setInterval(function(){
				self.changeBanner('+');
			},3000)
	    },
		
		// destroyed() {
		// 	const self = this;
		// 	clearInterval(this.timer);        
		// 	self.bannerTimer = null;
		// },
	    methods: {
			
			getMainData(){
			    var self = this;
			    var postData = {};
				
			    postData.searchItem = {
					title:'轮播图'
				};
			    var callback = function(res){
			        console.log('getMainData', res);
					// self.bannerData = res.info.data[0].mainImg
			    };
				console.log('self.newsData',self.newsData)
			    window.base.labelGet(postData, callback);
			},
			
			toBannerOne:function(e){
				const self = this;
				console.log('e',e)
				var index = parseInt(e.target.dataset.index);
				self.banner_index = index;
			},
			
	    	to_headBanner:function(){
				var self = this;
				var postData = {};
				postData.searchItem = window.base.cloneForm(self.searchItem);
				var callback = function(res){
				     if(res.info.data.length>0){
						 self.bannerData =res.info.data[0].mainImg;
						 console.log('self.bannerData',self.bannerData)
				     };    
				};
				window.base.labelGet(postData, callback);
	    	},
	        
	    	changeBanner: function(type) {
	    		var self = this;
	    		if(type=='+'){
	    			console.log(8852)
	    			self.banner_index += 1;
	    		}else if((type=='-')){
	    			self.banner_index -= 1;
	    		};
	    		
	    		if(self.banner_index<0){
	    			self.banner_index = self.bannerData.length-1
	    		};
	    		if(self.banner_index==self.bannerData.length){
	    			self.banner_index = 0
	    		};	
	    		console.log('self.banner_index',self.banner_index);
	    	},
			
			intoPath:function(url,id){
			    var self = this;
			    var toUrl = url;
			    console.log(toUrl);
			    window.location.href= toUrl+'?id='+id;
			
			},

			
	    }
	});
</script>

<style>
/*网站banner*/

.pubHeadBanner .banner{ width: 100%; height: 100%;overflow: hidden; box-sizing: border-box;}
.pubHeadBanner .banner .pic{ height: 100%;width: 100%; display: block; }

.banBtnNav{ width: 100%; text-align: center; position: absolute; bottom:3%; left: 0;z-index: 9;}
.banBtnNav span{ display:inline-block; margin: 0 5px; border-radius: 8px; background:#ababab; width: 15px; height: 6px;box-shadow: 0 0 5px rgba(0,0,0,0.2);}
.banBtnNav span.active{width: 24px; opacity: 1; background: #c51114;}





</style>


